<!-- begin :: Page CSS -->
<th:block th:fragment="page_css">
	<link href="assets/css/template/order-detail.css" rel="stylesheet" type="text/css" />
</th:block>
<!-- end :: Page CSS -->

<!-- begin :: Content -->
<th:block th:fragment="content">
	<div class="kt-portlet kt-portlet--mobile">
		<div class="kt-portlet__head kt-portlet__head--lg">
			<div class="kt-portlet__head-label">
				<span class="kt-portlet__head-icon">
					<i class="kt-font-brand flaticon2-line-chart"></i>
				</span>
				<h3 class="kt-portlet__head-title">
					Đơn Hàng #<span id="order_id" th:text="${order.id}"></span> - <span th:text="${order.deliveryStatus}"></span>
				</h3>
			</div>
			<div class="kt-portlet__head-toolbar">
				<div class="kt-portlet__head-wrapper">
					<a href="#" class="btn btn-clean btn-icon-sm d-none">
						<i class="la la-long-arrow-left"></i>
						Quay lại
					</a>
					&nbsp;
					<div class="dropdown dropdown-inline" th:if="${order.deliveryStatus != 'Cancelled'}">
						
						<span th:if="${order.deliveryStatus != 'Successful'
										and order.deliveryStatus != 'Unsuccessful'
										and order.deliveryStatus != 'Cancelled'}">
							<a th:href="@{/updateOrder(action='Cancel',page=${page != null ? page : 1}, id=${order.id})}" class="btn btn-danger btn-icon-sm" id="cancel_order_header">
								<i class="flaticon2-trash"></i> Hủy đơn hàng
							</a>
						</span>
					</div>
				</div>
			</div>
		</div>
		<div class="kt-portlet__body">
		
			<div class="row order_web_info">
				<div class="col-12 col-md-6">
					<div class="row">
						<div class="col-5 col-md-4 lbl_title">Người nhận hàng:</div>
						<div class="col-7 col-md-8" th:text="${order.consignee}"></div>
					</div>
				</div>
				<div class="col-12 col-md-6">
					<div class="row">
						<div class="col-5 col-md-4 lbl_title">Số điện thoại:</div>
						<div class="col-7 col-md-8" th:text="${order.consigneePhone}"></div>
					</div>
				</div>
				<div class="col-12 col-md-6">
					<div class="row">
						<div class="col-5 col-md-4 lbl_title">Địa chỉ nhận hàng:</div>
						<div class="col-7 col-md-8" th:text="${order.deliveryAddress}"></div>
					</div>
				</div>
				<div class="col-12 col-md-6">
					<div class="row">
						<div class="col-5 col-md-4 lbl_title">Hình thức thanh toán:</div>
						<div class="col-7 col-md-8" th:text="${order.paymentMethod}">ATM</div>
					</div>
				</div>
				<div class="col-12 col-md-6">
					<div class="row">
						<div class="col-5 col-md-4 lbl_title">Trạng thái thanh toán:</div>
						<div class="col-7 col-md-8" th:text="${order.paymentStatus}">ATM</div>
					</div>
				</div>
				<div class="col-12 col-md-6">
					<div class="row">
						<div class="col-5 col-md-4 lbl_title">Trạng thái vận chuyển:</div>
						<div class="col-7 col-md-8" th:text="${order.deliveryStatus}">ATM</div>
					</div>
				</div>
			</div>

			<hr class="action_hr">
			<div class="row delivery_status_action">
				<div class="col-12 d-none"><h4>Thay đổi trạng thái:</h4></div>
				<div class="col-12">
					<span th:if="${order.deliveryStatus != 'Successful'
									and order.deliveryStatus != 'Approving'
									and order.deliveryStatus != 'Waiting'
									and order.deliveryStatus != 'Unsuccessful'
									and order.deliveryStatus != 'Cancelled'
									}">
						<a th:href="@{/updateOrder(action='Deliver successfully',id=${order.id},page=${page != null ? page : 1}, id=${order.id})}" class="btn btn-success">Deliver successfully</a>
					</span>
					<span th:if="${order.deliveryStatus != 'Successful'
									and order.deliveryStatus != 'Unsuccessful'
									and order.deliveryStatus != 'Cancelled'}">
						<a th:href="@{/updateOrder(action=${order.getDeliveryAction()},id=${order.id},page=${page != null ? page : 1}, id=${order.id})}" class="btn btn-primary" th:text="${order.getDeliveryAction()}"></a>
					</span>
					
					
					
					<a th:href="@{/getOrderList(page=${page != null ? page : 1}, id=${order.id})}" class="btn btn-clean btn-icon-sm undo_action" th:status="${undoAction}" th:if="${undoAction != ''}">
						<i class="la la-long-arrow-left"></i>
						Quay lại trạng thái trước
					</a>
				</div>
			</div>

		</div>
		<div class="kt-portlet__body kt-portlet__body--fit">

			<!--begin: Datatable -->
			<table style="border-collapse: collapse; width: 100%; margin: 20px">
					<tr>
						<th title="Field #1">Sản phẩm</th>
						<th title="Field #2">Giá</th>
						<th title="Field #3">Số lượng</th>
						<th title="Field #4">Tạm tính</th>
						<th title="Field #5">Phiên bản</th>
					</tr>
					<tr th:each="item : ${order.getOrderDetails()}" th:with="product=${item.product}">
						<td style="text-align: left;"><a th:href="@{/product(id=${product.id})}" th:text="${product.name}" target="_blank"></a></td>
						<td style="text-align: left;" th:text="${order.formatPrice(item.price)}"></td>
						<td style="text-align: left;" th:text="${item.quantity}"></td>
						<td style="text-align: left;" align="right" th:text="${order.formatPrice(item.totalAmount)}"></td>
						<td style="text-align: left;" th:text="${product.versionName}"></td>
					</tr>
			</table>
			

			<!--end: Datatable -->
		</div>
	</div>
</th:block>
<!-- end :: Content -->

<!--begin :: Page Script (used by this page) -->
<th:block th:fragment="page_script">
	<script src="assets/js/pages/crud/metronic-datatable/base/html-table.js" type="text/javascript"></script>
	<script src="assets/js/template/order-detail.js" type="text/javascript"></script>
</th:block>
<!--end :: Page Script -->